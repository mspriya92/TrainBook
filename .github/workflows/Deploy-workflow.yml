
name: Conditional Workflow Execution

on:
  workflow_dispatch:
    inputs:
     trigger_job1:
       description: 'Trigger Job 1'
       default: true
       type: boolean
       required: true
  workflow_call:
    inputs:
      environment:
        description: 'Choose the env to deploy (Dev or Prod)?'
        required: true
        type: string

jobs:
  Deploy_Dev:
    runs-on: ubuntu-latest
    environment: Dev
    if: ${{ github.event.inputs.trigger_job1 == 'true' }}
    steps:
      - name: Job 1
        run: echo "Running Job 1 for dev environment"
      - name: Modified Job 1
        if: ${{ github.event.inputs.trigger_job1 != 'true' && github.event.inputs.environment == 'Dev' }}
        run: echo "Running modified Job 1 for dev environment"
        
  Deploy_Prod:
    #if: ${{ success() && github.event.inputs.environment == 'Prod' }}
    needs: Deploy_Dev
    runs-on: ubuntu-latest
    environment: Prod
    steps:
      - name: Job 1
        run: echo "Running Job 1 for Prod environment"
      - name: Modified Job 1
        if: ${{ github.event.inputs.trigger_job1 != 'true' && github.event.inputs.environment == 'Prod' }}
        run: echo "Running modified Job 1 for prod environment"

  #Deploy_Prod1:
    #if: ${{ success() && github.event.inputs.environment == 'Prod' }}
    #needs: Deploy_Prod
    #runs-on: ubuntu-latest
    #environment: Prod1
    #steps:
      #- name: Job 1
        #run: echo "Running Job 1 for Prod1 environment"


